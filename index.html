<!Doctype html>
<html>
<style>
.center {
  text-align: center;
  margin: auto;
  width: 80%;
  padding: 10px;
   background-color:white; /* Green background */
}
.btn-group button {
  background-color: #04AA6D; /* Green background */
  border: 1px solid green; /* Green border */
  color: white; /* White text */
  padding: 10px 24px; /* Some padding */
  cursor: pointer; /* Pointer/hand icon */
  width: 100%; /* Set a width if needed */
  display: block; /* Make the buttons appear below each other */
}

.btn-group button:not(:last-child) {
  border-bottom: none; /* Prevent double borders */
}

/* Add a background color on hover */
.btn-group button:hover {
  background-color: #3e8e41;
}
</style>
<body class="center">

<h1 class="center">Flutter MiniApp</h1>
  <br>
<div class="btn-group">
  <button onclick = "launchCamera()" >Launch Camera</button>
  <br>
  <button onclick = "launchGallery()" >Launch Gallery</button>
  <br>
  <button onclick = "launchLivenessCheck()" >Liveness Check</button>
  <br>
  <button onclick = "getMobileAgent()" >Get Mobile Agent</button>
  <br>
  <button onclick = "diplayDialogMessage()" >Display Message</button>
  <br>
  <button onclick = "closeMiniApp()" >Close MiniApp</button>
</div>

 <h1 id="title">...</h1>
 <img id="selectedImagePreview" src=""></img>

<script src="anjsbridge_flutter.js"></script>
<script>
    
    function fromFlutter(newTitle) {
        document.getElementById("title").innerHTML = newTitle;
    }
    
    const reqObject = { "metadata": { "version": 1.0 }};
    
    function anGetMobileAgentResult(result) {
        console.log(result);
        document.getElementById("title").innerHTML = result;
    }

    function anSelectCameraImageResult(selectedImageAsBase64) {
    document.getElementById("selectedImagePreview").src = "data:image/png;base64," + selectedImageAsBase64;
  }
    
    function getMobileAgent() {
        ANJSBridge.call('anGetMobileAgent', JSON.stringify(reqObject), anGetMobileAgentResult );
    }
      function launchCamera() {
        ANJSBridge.call('anSelectCameraImage', JSON.stringify(reqObject), anSelectCameraImageResult);
    }
     function launchGallery() {
        ANJSBridge.call('anSelectGalleryImage', JSON.stringify(reqObject), anSelectCameraImageResult);
    }
      function launchLivenessCheck() {
        ANJSBridge.call('anRunLivenessCheck', JSON.stringify(reqObject), anGetMobileAgentResult);
    }
    function diplayDialogMessage() {
      ANJSBridge.call('anDisplayDialogMessage', JSON.stringify(reqObject), anGetMobileAgentResult);
  }
    function closeMiniApp() {
        const reqCloseObject = {"request": {"showWarningPopup": true, "warningMessage": { "en": "Are you sure you want to close the application?", "ar": "هل أنت متأكد أنك تريد إغلاق التطبيق؟"}},"metadata":{"version": 1.0, "miniAppId": "SEWRFSD"}};
      ANJSBridge.call('anCloseMiniApp', JSON.stringify(reqCloseObject), anGetMobileAgentResult);
  }
</script>
</body>
</html>

